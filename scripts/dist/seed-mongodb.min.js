"use strict";var _require=require("mongodb"),MongoClient=_require.MongoClient,ObjectId=_require.ObjectId,MONGODB_URI=process.env.MONGODB_URI||"mongodb://localhost:27017/cotizacion";function seedDatabase(){var o,a,t,n,r,i,c,d;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return o=new MongoClient(MONGODB_URI),e.prev=1,console.log("üîó Conectando a MongoDB..."),e.next=5,regeneratorRuntime.awrap(o.connect());case 5:return console.log("‚úÖ Conectado a MongoDB"),a=o.db(),console.log("üßπ Limpiando colecciones..."),e.next=10,regeneratorRuntime.awrap(a.collection("tiposproducto").deleteMany({}));case 10:return e.next=12,regeneratorRuntime.awrap(a.collection("proveedores").deleteMany({}));case 12:return e.next=14,regeneratorRuntime.awrap(a.collection("materiales").deleteMany({}));case 14:return e.next=16,regeneratorRuntime.awrap(a.collection("productos").deleteMany({}));case 16:return e.prev=16,e.next=19,regeneratorRuntime.awrap(a.collection("productos").dropIndex("codigo_1"));case 19:console.log("üóëÔ∏è √çndice codigo_1 eliminado"),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(16),console.log("‚ÑπÔ∏è √çndice codigo_1 no exist√≠a");case 25:return console.log("üì¶ Creando tipos de producto..."),e.next=28,regeneratorRuntime.awrap(a.collection("tiposproducto").insertMany([{_id:new ObjectId,nombre:"Ventana PVC",descripcion:"Ventanas de PVC con diferentes configuraciones",categoria:"ventanas",mano_obra_fabricacion:150,mano_obra_instalacion:200,estado:!0,createdAt:new Date,updatedAt:new Date},{_id:new ObjectId,nombre:"Ventana Aluminio",descripcion:"Ventanas de aluminio con diferentes configuraciones",categoria:"ventanas",mano_obra_fabricacion:180,mano_obra_instalacion:220,estado:!0,createdAt:new Date,updatedAt:new Date},{_id:new ObjectId,nombre:"Puerta PVC",descripcion:"Puertas de PVC con diferentes configuraciones",categoria:"puertas",mano_obra_fabricacion:200,mano_obra_instalacion:300,estado:!0,createdAt:new Date,updatedAt:new Date},{_id:new ObjectId,nombre:"Barandal",descripcion:"Barandales de diferentes materiales",categoria:"barandales",mano_obra_fabricacion:120,mano_obra_instalacion:180,estado:!0,createdAt:new Date,updatedAt:new Date}]));case 28:return t=e.sent,n=Object.values(t.insertedIds),console.log("‚úÖ ".concat(n.length," tipos de producto creados")),console.log("üè¢ Creando proveedores..."),e.next=34,regeneratorRuntime.awrap(a.collection("proveedores").insertMany([{_id:new ObjectId,nombre:"Proveedor PVC Premium",contacto:"Juan P√©rez",telefono:"555-0101",email:"juan@pvcpremium.com",direccion:"Av. Industrial 123",ciudad:"Ciudad de M√©xico",pais:"M√©xico",tipoMateriales:["PVC","Herrajes"],descuentoGeneral:5,estado:!0,createdAt:new Date,updatedAt:new Date},{_id:new ObjectId,nombre:"Aluminio y Vidrios SA",contacto:"Mar√≠a Gonz√°lez",telefono:"555-0202",email:"maria@aluvid.com",direccion:"Calle Aluminio 456",ciudad:"Guadalajara",pais:"M√©xico",tipoMateriales:["Aluminio","Vidrio"],descuentoGeneral:8,estado:!0,createdAt:new Date,updatedAt:new Date},{_id:new ObjectId,nombre:"Herrajes y Accesorios",contacto:"Carlos Rodr√≠guez",telefono:"555-0303",email:"carlos@herrajes.com",direccion:"Zona Industrial 789",ciudad:"Monterrey",pais:"M√©xico",tipoMateriales:["Herrajes","Accesorios"],descuentoGeneral:3,estado:!0,createdAt:new Date,updatedAt:new Date}]));case 34:return r=e.sent,i=Object.values(r.insertedIds),console.log("‚úÖ ".concat(i.length," proveedores creados")),console.log("üîß Creando materiales..."),e.next=40,regeneratorRuntime.awrap(a.collection("materiales").insertMany([{_id:new ObjectId,nombre:"Perfil PVC Ventana",descripcion:"Perfil principal para ventanas de PVC",categoria:"PVC",unidad:"ml",costo:45.5,stock:1e3,stockMinimo:100,proveedor_id:i[0],contribuyeMalla:!1,estado:!0,variantes:[{tipo:"color_pvc",nombre:"Blanco",costo_adicional:0},{tipo:"color_pvc",nombre:"Caf√©",costo_adicional:5},{tipo:"color_pvc",nombre:"Negro",costo_adicional:8}],createdAt:new Date,updatedAt:new Date},{_id:new ObjectId,nombre:"Perfil Aluminio Ventana",descripcion:"Perfil principal para ventanas de aluminio",categoria:"Aluminio",unidad:"ml",costo:65,stock:800,stockMinimo:80,proveedor_id:i[1],contribuyeMalla:!1,estado:!0,variantes:[{tipo:"color_aluminio",nombre:"Natural",costo_adicional:0},{tipo:"color_aluminio",nombre:"Bronce",costo_adicional:12},{tipo:"color_aluminio",nombre:"Negro",costo_adicional:15}],createdAt:new Date,updatedAt:new Date},{_id:new ObjectId,nombre:"Vidrio Claro 6mm",descripcion:"Vidrio transparente de 6mm de espesor",categoria:"Vidrio",unidad:"m2",costo:180,stock:500,stockMinimo:50,proveedor_id:i[1],contribuyeMalla:!1,estado:!0,variantes:[{tipo:"tipo_vidrio",nombre:"Claro",costo_adicional:0},{tipo:"tipo_vidrio",nombre:"Bronce",costo_adicional:25},{tipo:"tipo_vidrio",nombre:"Azul",costo_adicional:30}],createdAt:new Date,updatedAt:new Date},{_id:new ObjectId,nombre:"Malla Mosquitera",descripcion:"Malla para mosquiteros",categoria:"Accesorios",unidad:"m2",costo:25,stock:200,stockMinimo:20,proveedor_id:i[2],contribuyeMalla:!0,estado:!0,variantes:[{tipo:"otro",nombre:"Est√°ndar",costo_adicional:0},{tipo:"otro",nombre:"Reforzada",costo_adicional:8}],createdAt:new Date,updatedAt:new Date}]));case 40:return c=e.sent,d=Object.values(c.insertedIds),console.log("‚úÖ ".concat(d.length," materiales creados")),console.log("üèóÔ∏è Creando productos..."),e.next=46,regeneratorRuntime.awrap(a.collection("productos").insertMany([{_id:new ObjectId,nombre:"Ventana PVC 2 Hojas",codigo:"PROD-001",identificador:"VEN-PVC-2H",descripcion:"Ventana de PVC con 2 hojas corredizas",tipo_producto_id:n[0],user_id:new ObjectId,imagen:"/placeholder.svg?height=200&width=200",svg:'<rect width="100" height="60" fill="#e5e7eb" stroke="#374151" stroke-width="2"/>',proveedor_id:i[0],margen_ganancia:35,estado:!0,materiales:[{material_id:d[0],formula:"REDONDEAR.MENOS((ancho + alto) * 2 / 100, 0) * 100"},{material_id:d[2],formula:"REDONDEAR.MENOS(ancho * alto / 10000, 2)"},{material_id:d[3],formula:"SI(malla = 1, REDONDEAR.MENOS(ancho * alto / 10000, 2), 0)"}],createdAt:new Date,updatedAt:new Date},{_id:new ObjectId,nombre:"Ventana Aluminio 3 Hojas",codigo:"PROD-002",identificador:"VEN-ALU-3H",descripcion:"Ventana de aluminio con 3 hojas corredizas",tipo_producto_id:n[1],user_id:new ObjectId,imagen:"/placeholder.svg?height=200&width=200",svg:'<rect width="120" height="60" fill="#d1d5db" stroke="#374151" stroke-width="2"/>',proveedor_id:i[1],margen_ganancia:40,estado:!0,materiales:[{material_id:d[1],formula:"REDONDEAR.MENOS((ancho + alto) * 2.5 / 100, 0) * 100"},{material_id:d[2],formula:"REDONDEAR.MENOS(ancho * alto / 10000, 2)"}],createdAt:new Date,updatedAt:new Date}]));case 46:console.log("‚úÖ 2 productos creados"),console.log("üéâ ¬°Base de datos inicializada correctamente!"),console.log("\nüìä RESUMEN:"),console.log("- Tipos de producto: ".concat(n.length)),console.log("- Proveedores: ".concat(i.length)),console.log("- Materiales: ".concat(d.length)),console.log("- Productos: 2"),e.next=58;break;case 55:e.prev=55,e.t1=e.catch(1),console.error("‚ùå Error inicializando base de datos:",e.t1);case 58:return e.prev=58,e.next=61,regeneratorRuntime.awrap(o.close());case 61:return console.log("üîå Conexi√≥n cerrada"),e.finish(58);case 63:case"end":return e.stop()}},null,null,[[1,55,58,63],[16,22]])}require.main===module&&seedDatabase(),module.exports={seedDatabase:seedDatabase};
//# sourceMappingURL=seed-mongodb.min.js.map
