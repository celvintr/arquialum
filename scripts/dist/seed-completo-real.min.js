"use strict";var mongoose=require("mongoose"),bcrypt=require("bcryptjs"),MONGODB_URI=process.env.MONGODB_URI||"mongodb://localhost:27017/cotizacion";function seedDatabase(){var e,a,i,n,r,t,c,d,s,l,m,p,g,u,_,b,h,v,S,M,f,R,w,C,N,y,P,V,x,j,O,E,D,z;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,console.log("üîó Conectando a MongoDB..."),o.next=4,regeneratorRuntime.awrap(mongoose.connect(MONGODB_URI));case 4:return console.log("‚úÖ Conectado a MongoDB"),e=new mongoose.Schema({nombre:String,contacto:String,telefono:String,email:String,direccion:String,ciudad:String,pais:String,tipoMateriales:[String],descuentoGeneral:Number,estado:Boolean},{timestamps:!0}),a=new mongoose.Schema({nombre:String,descripcion:String,categoria:String,mano_obra_fabricacion:Number,mano_obra_instalacion:Number,estado:Boolean},{timestamps:!0}),i=new mongoose.Schema({nombre:String,descripcion:String,categoria:String,unidad:String,costo:Number,stock:Number,stockMinimo:Number,proveedor_id:mongoose.Schema.Types.ObjectId,contribuyeMalla:Boolean,estado:Boolean,variantes:[{tipo:String,nombre:String,costo_adicional:Number}]},{timestamps:!0}),n=new mongoose.Schema({nombre:String,codigo:String,identificador:String,descripcion:String,tipo_producto_id:mongoose.Schema.Types.ObjectId,user_id:mongoose.Schema.Types.ObjectId,imagen:String,svg:String,proveedor_id:mongoose.Schema.Types.ObjectId,margen_ganancia:Number,estado:Boolean,materiales:[{material_id:mongoose.Schema.Types.ObjectId,formula:String}]},{timestamps:!0}),r=new mongoose.Schema({nombre:String,email:String,telefono:String,direccion:String,ciudad:String,estado:Boolean},{timestamps:!0}),t=new mongoose.Schema({nombre:String,descripcion:String,cotizacion_id:mongoose.Schema.Types.ObjectId,orden:Number},{timestamps:!0}),c=new mongoose.Schema({numero:String,cliente_id:mongoose.Schema.Types.ObjectId,user_id:mongoose.Schema.Types.ObjectId,subtotal:Number,impuestos:Number,total:Number,estado:String,fecha_vencimiento:Date,notas:String},{timestamps:!0}),d=new mongoose.Schema({cotizacion_id:mongoose.Schema.Types.ObjectId,grupo_id:mongoose.Schema.Types.ObjectId,tipo:String,producto_id:mongoose.Schema.Types.ObjectId,descripcion:String,cantidad:Number,ancho:Number,alto:Number,malla:Boolean,color_aluminio:String,color_pvc:String,tipo_vidrio:String,precio_unitario:Number,subtotal:Number,imagen:String,orden:Number},{timestamps:!0}),s=new mongoose.Schema({nombre:String,descripcion:String,categoria:String,precio_base:Number,tiempo_estimado:Number,estado:Boolean},{timestamps:!0}),l=new mongoose.Schema({name:String,email:String,password:String,role:String,isActive:Boolean},{timestamps:!0}),m=mongoose.models.Proveedor||mongoose.model("Proveedor",e),p=mongoose.models.TipoProducto||mongoose.model("TipoProducto",a),g=mongoose.models.Material||mongoose.model("Material",i),u=mongoose.models.Producto||mongoose.model("Producto",n),_=mongoose.models.Cliente||mongoose.model("Cliente",r),b=mongoose.models.Grupo||mongoose.model("Grupo",t),h=mongoose.models.Cotizacion||mongoose.model("Cotizacion",c),v=mongoose.models.CotizacionItem||mongoose.model("CotizacionItem",d),S=mongoose.models.Reparacion||mongoose.model("Reparacion",s),M=mongoose.models.User||mongoose.model("User",l),console.log("üßπ Limpiando datos existentes..."),o.next=28,regeneratorRuntime.awrap(m.deleteMany({}));case 28:return o.next=30,regeneratorRuntime.awrap(p.deleteMany({}));case 30:return o.next=32,regeneratorRuntime.awrap(g.deleteMany({}));case 32:return o.next=34,regeneratorRuntime.awrap(u.deleteMany({}));case 34:return o.next=36,regeneratorRuntime.awrap(_.deleteMany({}));case 36:return o.next=38,regeneratorRuntime.awrap(b.deleteMany({}));case 38:return o.next=40,regeneratorRuntime.awrap(h.deleteMany({}));case 40:return o.next=42,regeneratorRuntime.awrap(v.deleteMany({}));case 42:return o.next=44,regeneratorRuntime.awrap(S.deleteMany({}));case 44:return o.next=46,regeneratorRuntime.awrap(M.deleteMany({}));case 46:return console.log("üë§ Creando usuarios..."),o.next=49,regeneratorRuntime.awrap(bcrypt.hash("password",10));case 49:return f=o.sent,o.next=52,regeneratorRuntime.awrap(M.insertMany([{name:"Administrador",email:"admin@test.com",password:f,role:"admin",isActive:!0},{name:"Vendedor",email:"vendedor@test.com",password:f,role:"vendedor",isActive:!0}]));case 52:return R=o.sent,console.log("‚úÖ ".concat(R.length," usuarios creados")),console.log("üè¢ Creando proveedores..."),o.next=57,regeneratorRuntime.awrap(m.insertMany([{nombre:"Naufar",contacto:"Juan P√©rez",telefono:"555-0001",email:"contacto@naufar.com",direccion:"Av. Industrial 123",ciudad:"Guadalajara",pais:"M√©xico",tipoMateriales:["aluminio","vidrio"],descuentoGeneral:5,estado:!0},{nombre:"Vitro",contacto:"Mar√≠a Garc√≠a",telefono:"555-0002",email:"ventas@vitro.com",direccion:"Blvd. Cristal 456",ciudad:"Monterrey",pais:"M√©xico",tipoMateriales:["vidrio","cristal"],descuentoGeneral:3,estado:!0},{nombre:"Herrajes SA",contacto:"Carlos Rodr√≠guez",telefono:"555-0003",email:"info@herrajessa.com",direccion:"Calle Industria 789",ciudad:"Ciudad de M√©xico",pais:"M√©xico",tipoMateriales:["herrajes","accesorios"],descuentoGeneral:8,estado:!0}]));case 57:return w=o.sent,console.log("‚úÖ ".concat(w.length," proveedores creados")),console.log("üì¶ Creando tipos de producto..."),o.next=62,regeneratorRuntime.awrap(p.insertMany([{nombre:"Ventana PVC",descripcion:"Ventanas de PVC con diferentes configuraciones",categoria:"ventanas",mano_obra_fabricacion:150,mano_obra_instalacion:200,estado:!0},{nombre:"Ventana Aluminio",descripcion:"Ventanas de aluminio con diferentes configuraciones",categoria:"ventanas",mano_obra_fabricacion:180,mano_obra_instalacion:220,estado:!0},{nombre:"Puerta PVC",descripcion:"Puertas de PVC con diferentes configuraciones",categoria:"puertas",mano_obra_fabricacion:200,mano_obra_instalacion:300,estado:!0},{nombre:"Vidrio Templado",descripcion:"Trabajos con vidrio templado como barandales y divisiones",categoria:"vidrios_templados",mano_obra_fabricacion:250,mano_obra_instalacion:350,estado:!0}]));case 62:return C=o.sent,console.log("‚úÖ ".concat(C.length," tipos de producto creados")),console.log("üîß Creando materiales..."),o.next=67,regeneratorRuntime.awrap(g.insertMany([{nombre:"Perfil PVC Ventana",descripcion:"Perfil principal para ventanas de PVC",categoria:"PVC",unidad:"ml",costo:45.5,stock:1e3,stockMinimo:100,proveedor_id:w[0]._id,contribuyeMalla:!1,estado:!0,variantes:[{tipo:"color_pvc",nombre:"Blanco",costo_adicional:0},{tipo:"color_pvc",nombre:"Caf√©",costo_adicional:5},{tipo:"color_pvc",nombre:"Negro",costo_adicional:8}]},{nombre:"Perfil Aluminio Ventana",descripcion:"Perfil principal para ventanas de aluminio",categoria:"Aluminio",unidad:"ml",costo:65,stock:800,stockMinimo:80,proveedor_id:w[1]._id,contribuyeMalla:!1,estado:!0,variantes:[{tipo:"color_aluminio",nombre:"Natural",costo_adicional:0},{tipo:"color_aluminio",nombre:"Bronce",costo_adicional:12},{tipo:"color_aluminio",nombre:"Negro",costo_adicional:15}]},{nombre:"Vidrio Claro 6mm",descripcion:"Vidrio transparente de 6mm de espesor",categoria:"Vidrio",unidad:"m2",costo:180,stock:500,stockMinimo:50,proveedor_id:w[1]._id,contribuyeMalla:!1,estado:!0,variantes:[{tipo:"tipo_vidrio",nombre:"Claro",costo_adicional:0},{tipo:"tipo_vidrio",nombre:"Bronce",costo_adicional:25},{tipo:"tipo_vidrio",nombre:"Azul",costo_adicional:30}]},{nombre:"Vidrio Templado 10mm",descripcion:"Vidrio templado de 10mm para barandales",categoria:"Vidrio Templado",unidad:"m2",costo:650,stock:200,stockMinimo:20,proveedor_id:w[1]._id,contribuyeMalla:!1,estado:!0,variantes:[{tipo:"tipo_vidrio",nombre:"Claro",costo_adicional:0},{tipo:"tipo_vidrio",nombre:"Esmerilado",costo_adicional:120},{tipo:"tipo_vidrio",nombre:"Satinado",costo_adicional:150}]},{nombre:"Herraje para Barandal",descripcion:"Kit de herrajes para barandal de vidrio templado",categoria:"Herrajes",unidad:"juego",costo:850,stock:50,stockMinimo:5,proveedor_id:w[2]._id,contribuyeMalla:!1,estado:!0,variantes:[{tipo:"otro",nombre:"Acero Inoxidable",costo_adicional:0},{tipo:"otro",nombre:"Cromado",costo_adicional:200}]},{nombre:"Malla Mosquitera",descripcion:"Malla para mosquiteros",categoria:"Accesorios",unidad:"m2",costo:25,stock:200,stockMinimo:20,proveedor_id:w[2]._id,contribuyeMalla:!0,estado:!0,variantes:[{tipo:"otro",nombre:"Est√°ndar",costo_adicional:0},{tipo:"otro",nombre:"Reforzada",costo_adicional:8}]}]));case 67:return N=o.sent,console.log("‚úÖ ".concat(N.length," materiales creados")),console.log("üèóÔ∏è Creando productos..."),o.next=72,regeneratorRuntime.awrap(u.insertMany([{nombre:"Ventana PVC 2 Hojas",codigo:"PROD-001",identificador:"VEN-PVC-2H",descripcion:"Ventana de PVC con 2 hojas corredizas",tipo_producto_id:C[0]._id,user_id:R[0]._id,imagen:"/placeholder.svg?height=200&width=200",svg:'<rect width="100" height="60" fill="#e5e7eb" stroke="#374151" stroke-width="2"/>',proveedor_id:w[0]._id,margen_ganancia:35,estado:!0,materiales:[{material_id:N[0]._id,formula:"REDONDEAR.MENOS((ancho + alto) * 2 / 100, 0) * 100"},{material_id:N[2]._id,formula:"REDONDEAR.MENOS(ancho * alto / 10000, 2)"},{material_id:N[5]._id,formula:"SI(malla = 1, REDONDEAR.MENOS(ancho * alto / 10000, 2), 0)"}]},{nombre:"Ventana Aluminio 3 Hojas",codigo:"PROD-002",identificador:"VEN-ALU-3H",descripcion:"Ventana de aluminio con 3 hojas corredizas",tipo_producto_id:C[1]._id,user_id:R[0]._id,imagen:"/placeholder.svg?height=200&width=200",svg:'<rect width="120" height="60" fill="#d1d5db" stroke="#374151" stroke-width="2"/>',proveedor_id:w[1]._id,margen_ganancia:40,estado:!0,materiales:[{material_id:N[1]._id,formula:"REDONDEAR.MENOS((ancho + alto) * 2.5 / 100, 0) * 100"},{material_id:N[2]._id,formula:"REDONDEAR.MENOS(ancho * alto / 10000, 2)"}]},{nombre:"Puerta PVC Sencilla",codigo:"PROD-003",identificador:"PTA-PVC-S",descripcion:"Puerta de PVC sencilla con vidrio",tipo_producto_id:C[2]._id,user_id:R[0]._id,imagen:"/placeholder.svg?height=200&width=200",svg:'<rect width="80" height="200" fill="#f3f4f6" stroke="#374151" stroke-width="2"/>',proveedor_id:w[0]._id,margen_ganancia:45,estado:!0,materiales:[{material_id:N[0]._id,formula:"REDONDEAR.MENOS((ancho + alto) * 2.2 / 100, 0) * 100"},{material_id:N[2]._id,formula:"REDONDEAR.MENOS(ancho * alto * 0.6 / 10000, 2)"}]},{nombre:"Barandal Vidrio Templado",codigo:"PROD-004",identificador:"BAR-VT",descripcion:"Barandal de vidrio templado con herrajes",tipo_producto_id:C[3]._id,user_id:R[0]._id,imagen:"/placeholder.svg?height=200&width=200",svg:'<rect width="150" height="40" fill="#d1fae5" stroke="#374151" stroke-width="2"/>',proveedor_id:w[1]._id,margen_ganancia:50,estado:!0,materiales:[{material_id:N[3]._id,formula:"REDONDEAR.MENOS(ancho * alto / 10000, 2)"},{material_id:N[4]._id,formula:"REDONDEAR.MENOS(ancho / 100, 0) + 1"}]}]));case 72:return y=o.sent,console.log("‚úÖ ".concat(y.length," productos creados")),console.log("üî® Creando reparaciones..."),o.next=77,regeneratorRuntime.awrap(S.insertMany([{nombre:"Cambio de Vidrio",descripcion:"Cambio de vidrio roto en ventana existente",categoria:"Reparaci√≥n Vidrios",precio_base:350,tiempo_estimado:2,estado:!0},{nombre:"Ajuste de Herrajes",descripcion:"Ajuste y lubricaci√≥n de herrajes en ventanas o puertas",categoria:"Reparaci√≥n Herrajes",precio_base:180,tiempo_estimado:1,estado:!0},{nombre:"Sellado de Filtraciones",descripcion:"Sellado de filtraciones de agua en ventanas o puertas",categoria:"Impermeabilizaci√≥n",precio_base:250,tiempo_estimado:1.5,estado:!0}]));case 77:return P=o.sent,console.log("‚úÖ ".concat(P.length," reparaciones creadas")),console.log("üë• Creando clientes..."),o.next=82,regeneratorRuntime.awrap(_.insertMany([{nombre:"Juan P√©rez",email:"juan@example.com",telefono:"555-1234",direccion:"Calle Principal 123",ciudad:"Ciudad de M√©xico",estado:!0},{nombre:"Constructora Moderna SA",email:"contacto@constructoramoderna.com",telefono:"555-5678",direccion:"Av. Reforma 456",ciudad:"Guadalajara",estado:!0},{nombre:"Mar√≠a Gonz√°lez",email:"maria@example.com",telefono:"555-9012",direccion:"Blvd. Las Palmas 789",ciudad:"Monterrey",estado:!0}]));case 82:return V=o.sent,console.log("‚úÖ ".concat(V.length," clientes creados")),console.log("üìù Creando cotizaci√≥n de ejemplo..."),o.next=87,regeneratorRuntime.awrap(h.create({numero:"COT-2024-001",cliente_id:V[0]._id,user_id:R[1]._id,subtotal:0,impuestos:0,total:0,estado:"borrador",fecha_vencimiento:new Date(Date.now()+2592e6),notas:"Cotizaci√≥n de ejemplo con m√∫ltiples productos y grupos"}));case 87:return x=o.sent,console.log("üìã Creando grupos..."),o.next=91,regeneratorRuntime.awrap(b.insertMany([{nombre:"Fachada Principal",descripcion:"Elementos para la fachada principal",cotizacion_id:x._id,orden:1},{nombre:"Interior Planta Baja",descripcion:"Elementos para el interior de la planta baja",cotizacion_id:x._id,orden:2}]));case 91:return j=o.sent,console.log("‚úÖ ".concat(j.length," grupos creados")),console.log("üìä Creando items de cotizaci√≥n..."),o.next=96,regeneratorRuntime.awrap(v.insertMany([{cotizacion_id:x._id,grupo_id:j[0]._id,tipo:"producto",producto_id:y[0]._id,descripcion:"Ventana PVC 2 Hojas 120x100cm",cantidad:2,ancho:120,alto:100,malla:!0,color_pvc:"Blanco",precio_unitario:3500,subtotal:7e3,imagen:"/placeholder.svg?height=200&width=200",orden:1},{cotizacion_id:x._id,grupo_id:j[0]._id,tipo:"producto",producto_id:y[1]._id,descripcion:"Ventana Aluminio 3 Hojas 180x120cm",cantidad:1,ancho:180,alto:120,malla:!1,color_aluminio:"Natural",precio_unitario:4800,subtotal:4800,imagen:"/placeholder.svg?height=200&width=200",orden:2},{cotizacion_id:x._id,grupo_id:j[1]._id,tipo:"producto",producto_id:y[2]._id,descripcion:"Puerta PVC Sencilla 90x210cm",cantidad:1,ancho:90,alto:210,color_pvc:"Caf√©",precio_unitario:6200,subtotal:6200,imagen:"/placeholder.svg?height=200&width=200",orden:1},{cotizacion_id:x._id,grupo_id:j[1]._id,tipo:"vidrio_templado",descripcion:"Barandal de Vidrio Templado 250x90cm",cantidad:1,ancho:250,alto:90,tipo_vidrio:"Claro",precio_unitario:8500,subtotal:8500,imagen:"/placeholder.svg?height=200&width=200",orden:2},{cotizacion_id:x._id,grupo_id:j[1]._id,tipo:"reparacion",descripcion:"Ajuste de Herrajes en ventanas existentes",cantidad:3,precio_unitario:180,subtotal:540,orden:3},{cotizacion_id:x._id,grupo_id:j[0]._id,tipo:"libre",descripcion:"Instalaci√≥n y materiales adicionales",cantidad:1,precio_unitario:1200,subtotal:1200,orden:3}]));case 96:return O=o.sent,console.log("‚úÖ ".concat(O.length," items de cotizaci√≥n creados")),E=O.reduce(function(o,e){return o+e.subtotal},0),z=E+(D=.16*E),o.next=103,regeneratorRuntime.awrap(h.updateOne({_id:x._id},{subtotal:E,impuestos:D,total:z}));case 103:console.log("‚úÖ Totales de cotizaci√≥n actualizados"),console.log("\nüéâ ¬°Datos de ejemplo creados exitosamente!"),console.log("\nüìä Resumen:"),console.log("- Usuarios: ".concat(R.length)),console.log("- Proveedores: ".concat(w.length)),console.log("- Tipos de Producto: ".concat(C.length)),console.log("- Materiales: ".concat(N.length)),console.log("- Productos: ".concat(y.length)),console.log("- Reparaciones: ".concat(P.length)),console.log("- Clientes: ".concat(V.length)),console.log("- Grupos: ".concat(j.length)),console.log("- Items de Cotizaci√≥n: ".concat(O.length)),console.log("\nüîë Credenciales de acceso:"),console.log("- Admin: admin@test.com / password"),console.log("- Vendedor: vendedor@test.com / password"),o.next=123;break;case 120:o.prev=120,o.t0=o.catch(0),console.error("‚ùå Error:",o.t0);case 123:return o.prev=123,o.next=126,regeneratorRuntime.awrap(mongoose.disconnect());case 126:return console.log("üîå Conexi√≥n cerrada"),o.finish(123);case 128:case"end":return o.stop()}},null,null,[[0,120,123,128]])}seedDatabase();
//# sourceMappingURL=seed-completo-real.min.js.map
